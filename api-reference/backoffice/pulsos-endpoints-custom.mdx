---
title: "Endpoints Customizados - Pulsos"
description: "APIs customizadas além dos endpoints CRUD padrão do Directus"
---

## Visão Geral

Além dos endpoints CRUD padrão do Directus (`/items/pulsos_*`), o sistema possui **20+ endpoints customizados** implementados como extensions que fornecem lógica de negócio avançada, analytics e operações especializadas.

**Base URL**: `https://backoffice.leapy.com`

<Tip>
  Estes endpoints são implementados como extensions do Directus localizadas em `directus-backoffice-with-extensions/src/extensions/`.
</Tip>

---

## Analytics e Histórico

Endpoints para consultar histórico e métricas de performance de talentos.

### GET /pulsos/performance/:jovem_id

Retorna histórico de avaliações de performance de um talento ao longo dos últimos 5 pulsos.

**Parâmetros**:
- `jovem_id` (path, required) - ID do talento

**Conversão de Performance para Score**:

| Performance | Score |
|-------------|-------|
| Abaixo | 1 |
| Dentro | 2 |
| Acima | 3 |

---

### GET /pulsos/efetivacao/:jovem_id

Retorna histórico de status de efetivação do talento nos últimos pulsos.

**Parâmetros**:
- `jovem_id` (path, required) - ID do talento

---

## Gestão de Acesso

Endpoints para controlar permissões e configurações específicas de cada conta.

### GET /pulsos-access/me

Retorna configurações e permissões de pulsos do usuário autenticado.

**Headers**:
- `Authorization: Bearer <user_token>`

---

### GET /pulsos-access/questions/:account_id

Retorna perguntas configuradas para uma conta específica.

**Parâmetros**:
- `account_id` (path, required) - ID da conta

---

## Agendamento

Endpoints para configurar e reagendar pulsos.

### GET /pulsos-schedule/settings/:account_id

Retorna configurações de agendamento de uma conta.

**Parâmetros**:
- `account_id` (path, required) - ID da conta

---

### POST /pulsos-schedule/reschedule/:pulso_id

Reagenda um pulso específico.

**Parâmetros**:
- `pulso_id` (path, required) - ID do pulso

**Body**: nova_data, motivo

---

## Filtros com Controle de Acesso

Endpoints para buscar pulsos com controle de acesso integrado.

### GET /pulsos-filtered/jovens

Retorna pulsos de jovens que o usuário tem permissão para visualizar.

**Query Parameters**:
- `status` (optional) - Filtrar por status
- `account_id` (optional) - Filtrar por conta
- `limit` (optional, default: 50) - Limite de resultados
- `offset` (optional, default: 0) - Offset para paginação

**Headers**:
- `Authorization: Bearer <user_token>`

---

### GET /pulsos-filtered/liderancas

Retorna pulsos de lideranças que o usuário tem permissão para visualizar.

**Query Parameters**: Similar ao endpoint de jovens

---

## Operações em Lote

Endpoints para criar múltiplos pulsos de uma vez.

### POST /pulsos/rh

Cria pulsos de RH em lote para múltiplos usuários.

**Body**:
- `account_id` - ID da conta
- `data_inicio` - Data de início
- `data_fim` - Data de fim
- `user_ids` - Array de IDs de usuários

**Validações**:
- data_inicio deve ser no mínimo hoje
- data_fim deve ser após data_inicio
- Usuários devem ter contratos ativos

---

## Workflows (Operações Internas)

<Warning>
  Estes endpoints são **apenas para uso interno** do Directus. São chamados por **Hooks CRON** e disparam eventos Inngest.
</Warning>

Endpoints especializados localizados em `extensions/endpoints-workflows/src/pulsos/` que fazem parte do mecanismo de automação do sistema.

### Arquitetura Hook → Endpoint → Evento

Estes endpoints são parte da arquitetura de automação:

1. **Hook CRON** dispara em horário configurado
2. **Endpoint Workflow** consulta dados e valida regras
3. **Evento Inngest** é disparado para processar jobs assíncronos

**URL Base**:
- Local: `http://localhost:8055/pulsos/`
- Produção: `https://backoffice.leapy.com/pulsos/`

---

### GET /pulsos/send-liberacao-pulsos-rh-to-rh

Envia notificações de liberação de pulsos RH.

**Chamado por**: Hook CRON `hook-cron-send-liberacao-pulsos-rh-to-rh` (diariamente às 8:00)

**Query Parameters**:
- `status` (default: "agendado") - Status dos pulsos a buscar
- `send_event` (default: true) - Se deve disparar evento Inngest

**Evento disparado**: `backoffice/pulsos_rh/liberacao-to-rh.send`

---

### GET /pulsos/send-liberacao-pulsos-rh-to-jovens

Envia notificações de liberação para jovens.

**Chamado por**: Hook CRON (diariamente às 8:05)

**Query Parameters**: Similar ao endpoint RH

**Evento disparado**: `backoffice/pulsos_rh/liberacao-to-jovens.send`

---

### GET /pulsos/send-lembrete-pulsos-rh-to-rh

Envia lembretes para RH sobre pulsos pendentes.

**Chamado por**: Hook CRON (diariamente às 8:00)

**Evento disparado**: `backoffice/pulsos_rh/lembrete-to-rh.send`

---

### GET /pulsos/send-lembrete

Envia lembretes gerais de pulsos pendentes.

**Chamado por**: Hook CRON (diariamente às 5:00)

**Evento disparado**: `backoffice/send-lembrete-pulsos.send`

---

### Fluxo Completo

| Hook CRON | Horário | Endpoint | Evento Inngest | Job Final |
|-----------|---------|----------|----------------|-----------|
| `hook-cron-send-liberacao-pulsos-rh-to-rh` | 8:00 | `/pulsos/send-liberacao-pulsos-rh-to-rh` | `liberacao-to-rh.send` | Email/WhatsApp RH |
| `hook-cron-send-liberacao-pulsos-rh-to-jovens` | 8:05 | `/pulsos/send-liberacao-pulsos-rh-to-jovens` | `liberacao-to-jovens.send` | Email/WhatsApp Jovens |
| `hook-cron-send-lembrete-pulsos-rh-to-rh` | 8:00 | `/pulsos/send-lembrete-pulsos-rh-to-rh` | `lembrete-to-rh.send` | Lembretes RH |
| `hook-cron-send-lembrete` | 5:00 | `/pulsos/send-lembrete` | `send-lembrete-pulsos.send` | Lembretes Gerais |

<Tip>
  Para mais detalhes sobre a arquitetura de automação, consulte [Integrações - Workflows](/documentation/domains/pulses/integrations#endpoints-workflows-uso-interno).
</Tip>

---

## Próximos Passos

<CardGroup cols={2}>
  <Card title="Endpoints CRUD Padrão" icon="database" href="/api-reference/backoffice/pulsos-jovens">
    APIs básicas do Directus
  </Card>
  <Card title="Webhooks e Eventos" icon="webhook" href="/api-reference/backoffice/pulsos-webhooks">
    Sistema de eventos Inngest
  </Card>
</CardGroup>
