---
title: "Endpoints Customizados - Pulsos"
description: "APIs customizadas além dos endpoints CRUD padrão do Directus"
---

## Visão Geral

Além dos endpoints CRUD padrão do Directus (`/items/pulsos_*`), o sistema possui **20+ endpoints customizados** implementados como extensions que fornecem lógica de negócio avançada, analytics e operações especializadas.

**Base URL**: `https://backoffice.leapy.com`

<Tip>
  Estes endpoints são implementados como extensions do Directus localizadas em `directus-backoffice-with-extensions/src/extensions/`.
</Tip>

---

## Analytics e Histórico

Endpoints para consultar histórico e métricas de performance de talentos.

### GET /pulsos/performance/:jovem_id

Retorna histórico de avaliações de performance de um talento ao longo dos últimos 5 pulsos.

**Parâmetros**:
- `jovem_id` (path, required) - ID do talento

**Resposta**:

```json
{
  "data": [
    {
      "pulso": 1,
      "performance": "Dentro",
      "performance_score": 2,
      "data_resposta": "2024-01-15T14:30:00Z"
    },
    {
      "pulso": 2,
      "performance": "Acima",
      "performance_score": 3,
      "data_resposta": "2024-04-10T10:20:00Z"
    }
  ]
}
```

**Conversão de Performance para Score**:

| Performance | Score |
|-------------|-------|
| "Abaixo" | 1 |
| "Dentro" | 2 |
| "Acima" | 3 |

---

### GET /pulsos/efetivacao/:jovem_id

Retorna histórico de status de efetivação do talento nos últimos pulsos.

**Parâmetros**:
- `jovem_id` (path, required) - ID do talento

**Resposta**:

```json
{
  "data": [
    {
      "pulso": 1,
      "status_efetivacao": "Sem Contrato",
      "data_resposta": "2024-01-15T14:30:00Z"
    },
    {
      "pulso": 2,
      "status_efetivacao": "Efetivado",
      "data_resposta": "2024-04-10T10:20:00Z"
    }
  ]
}
```

---

## Gestão de Acesso

Endpoints para controlar permissões e configurações específicas de cada conta.

### GET /pulsos-access/me

Retorna configurações e permissões de pulsos do usuário autenticado.

**Headers**:
- `Authorization: Bearer <user_token>`

**Resposta**:

```json
{
  "data": {
    "account_id": "uuid",
    "company_name": "Empresa XYZ",
    "can_create_pulsos": true,
    "can_view_analytics": true,
    "pulsos_config": {
      "periodicidade_dias": 90,
      "questions_enabled": true
    }
  }
}
```

---

### GET /pulsos-access/questions/:account_id

Retorna perguntas configuradas para uma conta específica.

**Parâmetros**:
- `account_id` (path, required) - ID da conta

**Resposta**:

```json
{
  "data": {
    "pulsos_jovens": [
      {
        "id": "uuid",
        "question": "Como você avalia seu desenvolvimento?",
        "type": "rating",
        "required": true,
        "order": 1
      }
    ],
    "pulsos_liderancas": [
      {
        "id": "uuid",
        "question": "Como você avalia a performance do talento?",
        "type": "rating",
        "required": true,
        "order": 1
      }
    ]
  }
}
```

---

## Agendamento

Endpoints para configurar e reagendar pulsos.

### GET /pulsos-schedule/settings/:account_id

Retorna configurações de agendamento de uma conta.

**Parâmetros**:
- `account_id` (path, required) - ID da conta

**Resposta**:

```json
{
  "data": {
    "periodicidade_dias": 90,
    "data_proximo_pulso": "2024-06-15",
    "auto_schedule_enabled": true,
    "notification_days_before": 7
  }
}
```

---

### POST /pulsos-schedule/reschedule/:pulso_id

Reagenda um pulso específico.

**Parâmetros**:
- `pulso_id` (path, required) - ID do pulso

**Body**:

```json
{
  "nova_data": "2024-07-01",
  "motivo": "Férias do gestor"
}
```

**Resposta**:

```json
{
  "data": {
    "id": "uuid",
    "data_antiga": "2024-06-15",
    "data_nova": "2024-07-01",
    "reagendado_em": "2024-06-01T10:00:00Z"
  }
}
```

---

## Filtros com Controle de Acesso

Endpoints para buscar pulsos com controle de acesso integrado.

### GET /pulsos-filtered/jovens

Retorna pulsos de jovens que o usuário tem permissão para visualizar.

**Query Parameters**:
- `status` (optional) - Filtrar por status
- `account_id` (optional) - Filtrar por conta
- `limit` (optional, default: 50) - Limite de resultados
- `offset` (optional, default: 0) - Offset para paginação

**Headers**:
- `Authorization: Bearer <user_token>`

**Resposta**:

```json
{
  "data": [
    {
      "id": "uuid",
      "jovem": {
        "id": "uuid",
        "name": "João Silva",
        "email": "joao@example.com"
      },
      "status": "agendado",
      "data_inicio": "2024-06-01",
      "data_fim": "2024-06-07"
    }
  ],
  "meta": {
    "total": 150,
    "limit": 50,
    "offset": 0
  }
}
```

---

### GET /pulsos-filtered/liderancas

Retorna pulsos de lideranças que o usuário tem permissão para visualizar.

**Query Parameters**:
- `status` (optional) - Filtrar por status
- `account_id` (optional) - Filtrar por conta
- `limit` (optional, default: 50)
- `offset` (optional, default: 0)

**Headers**:
- `Authorization: Bearer <user_token>`

**Resposta**: Estrutura similar ao endpoint de jovens.

---

## Operações em Lote

Endpoints para criar múltiplos pulsos de uma vez.

### POST /pulsos/rh

Cria pulsos de RH em lote para múltiplos usuários.

**Body**:

```json
{
  "account_id": "uuid",
  "data_inicio": "2024-06-01",
  "data_fim": "2024-06-07",
  "user_ids": ["uuid1", "uuid2", "uuid3"]
}
```

**Validações**:
- `data_inicio` deve ser no mínimo hoje
- `data_fim` deve ser após `data_inicio`
- Usuários devem ter contratos ativos

**Resposta**:

```json
{
  "data": {
    "criados": 3,
    "pulsos": [
      {
        "id": "uuid1",
        "user_id": "uuid1",
        "status": "agendado"
      }
    ]
  }
}
```

---

## Próximos Passos

<CardGroup cols={2}>
  <Card title="Endpoints CRUD Padrão" icon="database" href="/api-reference/backoffice/pulsos-jovens">
    APIs básicas do Directus
  </Card>
  <Card title="Webhooks e Eventos" icon="webhook" href="/api-reference/backoffice/pulsos-webhooks">
    Sistema de eventos Inngest
  </Card>
</CardGroup>
