---
title: "Configuração de Pulsos"
description: "APIs para gerenciar configurações, agendamento e parâmetros do sistema de Pulsos"
---

## Visão Geral

O sistema de Pulsos possui 3 collections de configuração que controlam o comportamento automático, perguntas habilitadas e parâmetros globais.

## Collections de Configuração

| Collection | Descrição |
|------------|-----------|
| `pulsos_settings` | Configuração de perguntas habilitadas por perfil |
| `pulsos_schedule_settings` | Agendamento automático de pulsos |
| `pulsos_paramentros` | Parâmetros globais do sistema |

---

## 1. Pulsos Settings

**Collection**: `pulsos_settings`  
**Propósito**: Controlar quais perguntas estão habilitadas para cada perfil

### Schema

| Campo | Tipo | Descrição |
|-------|------|-----------|
| `id` | uuid | Identificador único |
| `account_id` | uuid | ID da empresa |
| `profile_enabled` | jsonb | Perfis habilitados |
| `questions_enabled` | jsonb | Perguntas habilitadas por perfil |
| `created_at` | datetime | Data de criação |
| `updated_at` | datetime | Última atualização |

### Estrutura do `questions_enabled`

```json
{
  "jovens": [
    "nps_leapy",
    "nps_empresa",
    "relacao_com_a_lideranca",
    "ambiente_da_empresa",
    "avaliacao_tarefas_e_desafios_dia_a_dia",
    "sei_o_que_e_esperado_de_mim_na_empresa",
    "sinto_que_sou_desafiado_todos_os_dias"
  ],
  "liderancas": [
    "performance",
    "prob_efetivacao",
    "recontrataria",
    "depoimento"
  ],
  "rh": [
    "nps_leapy",
    "report_e_dados_da_leapy",
    "comunicacao_leapy",
    "uso_da_plataforma_leapy"
  ]
}
```

### Endpoints

#### Obter Configurações

```bash
GET /items/pulsos_settings?filter[account_id][_eq]=uuid-da-empresa
```

<CodeGroup>

```bash cURL
curl -X GET "https://backoffice.leapy.com/items/pulsos_settings?filter[account_id][_eq]=uuid-da-empresa" \
  -H "Authorization: Bearer SEU_TOKEN"
```

```typescript TypeScript
const response = await fetch(
  'https://backoffice.leapy.com/items/pulsos_settings?filter[account_id][_eq]=uuid-da-empresa',
  {
    headers: {
      'Authorization': 'Bearer SEU_TOKEN'
    }
  }
);

const { data } = await response.json();
```

</CodeGroup>

#### Atualizar Perguntas Habilitadas

```bash
PATCH /items/pulsos_settings/{id}
```

<CodeGroup>

```json JSON
{
  "questions_enabled": {
    "jovens": [
      "nps_leapy",
      "nps_empresa",
      "relacao_com_a_lideranca"
    ]
  }
}
```

```typescript TypeScript
const response = await fetch(
  'https://backoffice.leapy.com/items/pulsos_settings/uuid',
  {
    method: 'PATCH',
    headers: {
      'Authorization': 'Bearer SEU_TOKEN',
      'Content-Type': 'application/json'
    },
    body: JSON.stringify({
      questions_enabled: {
        jovens: ['nps_leapy', 'nps_empresa', 'relacao_com_a_lideranca']
      }
    })
  }
);
```

</CodeGroup>

---

## 2. Pulsos Schedule Settings

**Collection**: `pulsos_schedule_settings`  
**Propósito**: Configurar agendamento automático de pulsos

### Schema

| Campo | Tipo | Descrição |
|-------|------|-----------|
| `id` | uuid | Identificador único |
| `account_id` | uuid | ID da empresa |
| `profile` | enum | Perfil ("jovens", "liderancas", "rh") |
| `enabled` | boolean | Se agendamento está ativo |
| `cadence_unit` | text | Unidade de tempo ("month", "week", "day") |
| `cadence_interval` | integer | Intervalo (ex: 3 para trimestral) |
| `next_pulso_date` | date | Próxima data de criação |
| `max_changes` | integer | Máximo de alterações permitidas |
| `created_at` | datetime | Data de criação |
| `updated_at` | datetime | Última atualização |
| `created_by` | uuid | Usuário criador |
| `updated_by` | uuid | Usuário atualizador |

### Valores Permitidos

| Campo | Valores |
|-------|---------|
| `profile` | "jovens", "liderancas", "rh" |
| `cadence_unit` | "day", "week", "month" |
| `cadence_interval` | 1-12 (recomendado: 1, 2, 3, 6, 12) |

### Exemplos de Cadência

| Configuração | `cadence_unit` | `cadence_interval` |
|--------------|----------------|-------------------|
| Semanal | `week` | `1` |
| Quinzenal | `week` | `2` |
| Mensal | `month` | `1` |
| Trimestral | `month` | `3` |
| Semestral | `month` | `6` |
| Anual | `month` | `12` |

### Endpoints

#### Listar Configurações de Agendamento

```bash
GET /items/pulsos_schedule_settings?filter[account_id][_eq]=uuid-da-empresa
```

<CodeGroup>

```bash cURL
curl -X GET "https://backoffice.leapy.com/items/pulsos_schedule_settings?filter[account_id][_eq]=uuid-da-empresa" \
  -H "Authorization: Bearer SEU_TOKEN"
```

```typescript TypeScript
const response = await fetch(
  'https://backoffice.leapy.com/items/pulsos_schedule_settings?filter[account_id][_eq]=uuid-da-empresa',
  {
    headers: {
      'Authorization': 'Bearer SEU_TOKEN'
    }
  }
);

const { data } = await response.json();
```

</CodeGroup>

**Resposta:**

```json
{
  "data": [
    {
      "id": "uuid-1",
      "account_id": "uuid-da-empresa",
      "profile": "jovens",
      "enabled": true,
      "cadence_unit": "month",
      "cadence_interval": 3,
      "next_pulso_date": "2024-05-01"
    },
    {
      "id": "uuid-2",
      "account_id": "uuid-da-empresa",
      "profile": "liderancas",
      "enabled": true,
      "cadence_unit": "month",
      "cadence_interval": 3,
      "next_pulso_date": "2024-05-01"
    }
  ]
}
```

#### Criar Configuração de Agendamento

```bash
POST /items/pulsos_schedule_settings
```

<CodeGroup>

```json JSON
{
  "account_id": "uuid-da-empresa",
  "profile": "jovens",
  "enabled": true,
  "cadence_unit": "month",
  "cadence_interval": 3,
  "next_pulso_date": "2024-05-01"
}
```

```typescript TypeScript
const response = await fetch(
  'https://backoffice.leapy.com/items/pulsos_schedule_settings',
  {
    method: 'POST',
    headers: {
      'Authorization': 'Bearer SEU_TOKEN',
      'Content-Type': 'application/json'
    },
    body: JSON.stringify({
      account_id: 'uuid-da-empresa',
      profile: 'jovens',
      enabled: true,
      cadence_unit: 'month',
      cadence_interval: 3,
      next_pulso_date: '2024-05-01'
    })
  }
);
```

</CodeGroup>

#### Atualizar Agendamento

```bash
PATCH /items/pulsos_schedule_settings/{id}
```

**Exemplo - Mudar de trimestral para mensal:**

<CodeGroup>

```bash cURL
curl -X PATCH "https://backoffice.leapy.com/items/pulsos_schedule_settings/uuid-1" \
  -H "Authorization: Bearer SEU_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "cadence_unit": "month",
    "cadence_interval": 1,
    "next_pulso_date": "2024-03-01"
  }'
```

```typescript TypeScript
const response = await fetch(
  'https://backoffice.leapy.com/items/pulsos_schedule_settings/uuid-1',
  {
    method: 'PATCH',
    headers: {
      'Authorization': 'Bearer SEU_TOKEN',
      'Content-Type': 'application/json'
    },
    body: JSON.stringify({
      cadence_unit: 'month',
      cadence_interval: 1,
      next_pulso_date: '2024-03-01'
    })
  }
);
```

</CodeGroup>

#### Pausar/Retomar Agendamento

```bash
PATCH /items/pulsos_schedule_settings/{id}
```

<CodeGroup>

```json Pausar
{
  "enabled": false
}
```

```json Retomar
{
  "enabled": true
}
```

</CodeGroup>

---

## 3. Pulsos Parâmetros

**Collection**: `pulsos_paramentros`  
**Propósito**: Parâmetros globais que controlam o comportamento do sistema

### Schema

| Campo | Tipo | Descrição |
|-------|------|-----------|
| `id` | integer | Identificador único |
| `tipo_pulso` | string | Tipo do pulso |
| `gatilho_criacao` | string | Gatilho que dispara criação |
| `frequencia` | integer | Frequência em dias |
| `dias_antes_notificacao_abertura` | integer | Dias antes de notificar |
| `recorrencia_notificacao_pendentes` | integer | Recorrência de lembretes (dias) |
| `recorrencia_notificacao_pendentes_rh` | integer | Recorrência lembretes RH (dias) |
| `gatilho_parada` | string | Gatilho que para criação |
| `roles` | json | Roles que devem receber |
| `prazo` | integer | Prazo para resposta (dias) |

### Endpoints

#### Listar Parâmetros

```bash
GET /items/pulsos_paramentros
```

<CodeGroup>

```bash cURL
curl -X GET "https://backoffice.leapy.com/items/pulsos_paramentros" \
  -H "Authorization: Bearer SEU_TOKEN"
```

```typescript TypeScript
const response = await fetch(
  'https://backoffice.leapy.com/items/pulsos_paramentros',
  {
    headers: {
      'Authorization': 'Bearer SEU_TOKEN'
    }
  }
);

const { data } = await response.json();
```

</CodeGroup>

**Resposta:**

```json
{
  "data": [
    {
      "id": 1,
      "tipo_pulso": "jovens",
      "frequencia": 90,
      "dias_antes_notificacao_abertura": 2,
      "recorrencia_notificacao_pendentes": 3,
      "recorrencia_notificacao_pendentes_rh": 7,
      "prazo": 7,
      "roles": ["jovem", "estagiario", "aprendiz"]
    }
  ]
}
```

#### Atualizar Parâmetros

```bash
PATCH /items/pulsos_paramentros/{id}
```

<Warning>
  Cuidado ao alterar parâmetros globais. Mudanças afetam todo o sistema de Pulsos e podem impactar agendamentos futuros.
</Warning>

---

## Boas Práticas

### 1. Agendamento Automático

<Tip>
  Configure `next_pulso_date` sempre para o primeiro dia do mês/semana para facilitar planejamento.
</Tip>

### 2. Cadências Recomendadas

| Perfil | Cadência Recomendada | Justificativa |
|--------|---------------------|---------------|
| Jovens | Trimestral (`month: 3`) | Captura evolução sem sobrecarregar |
| Lideranças | Trimestral (`month: 3`) | Alinhado com ciclos de avaliação |
| RH | Semestral (`month: 6`) | Feedback estratégico menos frequente |

### 3. Notificações

| Parâmetro | Valor Recomendado |
|-----------|-------------------|
| `dias_antes_notificacao_abertura` | 2 dias |
| `recorrencia_notificacao_pendentes` | 3 dias |
| `prazo` | 7 dias |

### 4. Validação

Sempre valide:
- `next_pulso_date` deve ser futura
- `cadence_interval` deve ser ≥ 1
- `enabled` deve ser boolean
- `profile` deve ser válido

## Jobs Relacionados

Jobs do Inngest que usam essas configurações:

- `createPulsosJovens` - Lê `pulsos_schedule_settings` para criar pulsos
- `createPulsosLiderancas` - Lê `pulsos_schedule_settings` para criar pulsos
- `processaPulsosJovensOuLiderancas` - Usa `pulsos_paramentros` para lógica

## Próximos Passos

<CardGroup cols={2}>
  <Card title="Pulsos de Jovens" icon="user" href="/api-reference/backoffice/pulsos-jovens">
    API de pulsos de talentos
  </Card>
  <Card title="Webhooks" icon="webhook" href="/documentation/domains/pulses/webhooks">
    Eventos do sistema
  </Card>
  <Card title="Guia de Configuração" icon="gear" href="/guides/app-rh/pulsos-configurar-agendamento">
    Tutorial para usuários
  </Card>
  <Card title="Exemplos" icon="code" href="/api-reference/backoffice/pulsos-examples">
    Casos de uso práticos
  </Card>
</CardGroup>
